<!DOCTYPE html>
<html>
  <head>
    <title>DecSpace: Workspace</title>

    <meta name = 'viewport' content = 'width = device-width, initial-scale = 1'>

    <!-- CSS Stylesheet -->
    <link rel = 'stylesheet' type = 'text/css' href = '../../css/index.css'/>
    <link rel = 'stylesheet' type = 'text/css' href = '../../css/workspace.css'/>
    <link rel = 'stylesheet' type = 'text/css' href = '../../css/sort.css'/>
    <link rel = 'stylesheet' type = 'text/css' href = '../../css/srf.css'/>

    <!-- jQuery -->
    <script type = 'text/javascript' src = '../../js/shared/jquery-3.1.0.js'></script>
    <script type = 'text/javascript' src = '../../js/shared/jquery-ui-1.12.0/jquery-ui.js'></script>

    <!-- AngularJS -->
    <script src = '../../js/shared/angular.min.js'></script>

    <!-- AngularJS Modules -->
    <script src = '../../js/app.js'></script>

    <!-- AngularJS Controllers -->
    <script src = '../../js/controllers/workspace/WorkspaceController.js'></script>
    <script src = '../../js/controllers/workspace/CATSDController.js'></script>
    <script src = '../../js/controllers/workspace/InquiryController.js'></script>
    <script src = '../../js/controllers/workspace/OrderByController.js'></script>
    <script src = '../../js/controllers/workspace/SortController.js'></script>
    <script src = '../../js/controllers/workspace/SRFController.js'></script>

    <!-- AngularJS Services -->
    <script src = '../../js/services/OrderByService.js'></script>
    <script src = '../../js/services/CATSDService.js'></script>
    <script src = '../../js/services/InquiryService.js'></script>
    <script src = '../../js/services/SRFService.js'></script>
    <script src = '../../js/services/MethodsService.js'></script>
    <script src = '../../js/services/SortDataService.js'></script>

    <!-- Bootstrap -->
    <link rel = 'stylesheet' href = '../../js/shared/bootstrap-3.3.7-dist/css/bootstrap.min.css'/>
    <script type = 'text/javascript' src = '../../js/shared/bootstrap-3.3.7-dist/js/bootstrap.js'></script>

    <!-- Google Web Fonts -->
    <link href = 'https://fonts.googleapis.com/css?family=Open+Sans:400,600i' rel = 'stylesheet'>

    <!-- Font Awesome -->
    <link rel = 'stylesheet' href = '../../js/shared/font-awesome-4.7.0/css/font-awesome.css'></link>

    <!-- ng-draggable module -->
    <script src = '../../js/shared/ng-draggable/ngDraggable.js'></script>

    <!-- InteractJS -->
    <script type = 'text/javascript' src = '../../js/shared/interact.js'></script>

    <!-- MathJax -->
    <script type = 'text/x-mathjax-config'>
      MathJax.Hub.Config({
        CommonHTML: {
          scale: 90,
          linebreaks: { automatic: true }
        }
      });
    </script>
    <script type = 'text/javascript' async src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=AM_CHTML'></script>

    <!-- JSZip -->
    <script type = 'text/javascript' src = '../../js/shared/jszip.js'></script>

    <!-- FileSaver -->
    <script type = 'text/javascript' src = '../../js/shared/FileSaver.js'></script>
  </head>

  <body ng-app = 'decspace' ng-controller = 'WorkspaceController'>

    <!-- Navigation Bar -->
    <nav class = 'navbar navbar-custom navbar-fixed-top'>
      <div class = 'container'>
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class = 'navbar-header'>
          <button type = 'button' class = 'navbar-toggle collapsed' data-toggle = 'collapse' data-target = '#top-navbar' aria-expanded = 'false'>
            <span class = 'sr-only'>Toggle navigation</span>
            <span class = 'icon-bar'></span>
            <span class = 'icon-bar'></span>
            <span class = 'icon-bar'></span>
          </button>
          <!-- Title -->
          <a class = 'navbar-brand' href = '../workspace/projects.html'>DecSpace</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class = 'collapse navbar-collapse' id = 'top-navbar'>
          <!-- About, FAQ and Contact Us links. Sign Up and Log In buttons. -->
          <ul class = 'nav navbar-nav navbar-right'>
            <li>
              <p class = 'navbar-text' style = 'font-weight: 600; font-style: italic' ng-if = '!unregistered_user' ng-cloak>Welcome, {{name}}!</p>

              <p class = 'navbar-text' style = 'font-weight: 600; font-style: italic' ng-if = 'unregistered_user' ng-cloak>Welcome!</p>
            </li>
            
            <li><a href = 'projects.html'>Projects</a></li>
            
            <li><a href = '../homepage/about.html'>About</a></li>

            <li><a href = '../method-catalog/method-catalog.html'>Method Catalog</a></li>

            <li><a href = '../homepage/faq.html'>FAQ</a></li>

            <li><a href = '../homepage/contactus.html'>Contact Us</a></li>

            <li><a href = '../settings/settings.html'>Settings</a></li>

            <li><a href = '../administrator/administrator.html' ng-if = 'username == "admin@admin"' ng-cloak>Administrator</a></li>

            <li>
              <button type = 'button' class = 'btn btn-default navbar-btn' ng-click = 'logOut()'>
                <span class = 'glyphicon glyphicon-log-out'></span>
                Log Out
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div id = 'main-content' class = 'container'>

      <br>

      <p class = 'header-1'>Project - {{project_name}}</p>

      <div class = 'row'>
        <div class = 'col-md-4'>
          <!-- Button Bar -->
          <div class = 'btn-toolbar' role = 'toolbar'>

            <!-- Execute Button -->
            <button type = 'button' class = 'btn btn-default' ng-if = '!isLoading' ng-click = 'executeWorkflow()' title = 'Execute Workflow'>
              <span class = 'glyphicon glyphicon-play'></span>
            </button>
            <!-- Loading Button -->
            <button class = 'btn btn-default active' ng-if = 'isLoading' title = 'Working...' ng-cloak>
              <span class = 'glyphicon glyphicon-refresh glyphicon-refresh-animate'></span>
            </button>

            <!-- Save Button -->
            <button type = 'button' class = 'btn btn-success' ng-click = 'openSaveDataModal()' title = 'Save Workflow'>
              <span class = 'glyphicon glyphicon-floppy-save icon-large'></span>
            </button>

            <!-- Import Button -->
            <div class = 'btn-group' role = 'group'>
              <button type = 'button' class = 'btn btn-warning dropdown-toggle' data-toggle = 'dropdown' title = 'Import Data'>
                <span class = 'glyphicon glyphicon-import icon-large'></span>
                <span class = 'caret'></span>
              </button>
              <ul class = 'dropdown-menu'>
                <li data-toggle = 'modal' data-target = '#import-input-file-modal'><a href>Import Input File</a></li>
                <li data-toggle = 'modal' data-target = '#import-workflow-modal'><a href>Import Workflow</a></li>
              </ul>
            </div>

            <!-- Modules List -->
            <div class = 'btn-group' role = 'group'>
              <button class = 'btn btn-info dropdown-toggle' type = 'button' data-toggle = 'dropdown'>
                Methods
                <span class = 'caret'></span>
              </button>
              <ul class = 'dropdown-menu'>
                <li ng-repeat = 'method in methods' ng-click = 'createModule(method)'>
                  <a href>{{method}}</a>
                </li>
              </ul>
            </div>

            <!-- Archive Button -->
            <button type = 'button' class = 'btn btn-primary' title = 'Archive' data-toggle = 'modal' data-target = '#archive-modal'>
              <i class = 'fa fa-archive' aria-hidden = 'true'></i>
            </button>
          </div>
        </div>

        <div class = 'col-md-5'>
          <!-- Alerts -->
          <div class = 'alert alert-success custom-alert' id = 'save-success' style = 'height: 50px' ng-cloak>
            Workflow <strong>successfully</strong> saved.
          </div>

          <div class = 'alert alert-success custom-alert' id = 'reload-success' style = 'height: 50px' ng-cloak>
            Workflow <strong>successfully</strong> reloaded.
          </div>

          <div class = 'alert alert-danger custom-alert' id = 'invalid-connection1' style = 'height: 60px' ng-cloak>
            <strong>Invalid connection</strong> - Input points should be connected to Output points.
          </div>

          <div class = 'alert alert-danger custom-alert' id = 'invalid-connection2' style = 'height: 60px' ng-cloak>
            <strong>Invalid connection</strong> - Only points of different modules should be connected.
          </div>

          <div class = 'alert alert-danger custom-alert' id = 'invalid-connection3' style = 'height: 50px' ng-cloak>
            <strong>Invalid connection</strong> - That connection already exists.
          </div>

          <div class = 'alert alert-danger custom-alert' id = 'invalid-connection4' style = 'height: 50px' ng-cloak>
            <strong>Invalid connection</strong> - Input points can only be connected once.
          </div>

          <div class = 'alert alert-success custom-alert' id = 'execution-success' style = 'height: 50px' ng-cloak>
            Workflow <strong>successfully</strong> executed.
          </div>

          <div class = 'alert alert-danger custom-alert' id = 'execution-error' style = 'height: 60px' ng-cloak>
            <strong>Execution error</strong> - One or more modules do not have input data or any connection.
          </div>
        </div>

        <div class = 'col-md-3'>
          <!-- Creating Line Status -->
          <span style = 'display: inline-block'>Creating Connection:</span>
          <div class = 'connection-circle' ng-class = '{"green-light" : drawing_line, "red-light" : !drawing_line}' style = 'margin-top: 3%'></div>
        </div>
      </div>

      <!-- Workspace -->
      <div id = 'workspace'>
        <!-- SVG Area -->
        <svg id = 'svg'>

          <!-- Save Modal -->
          <div class = 'modal fade' id = 'save-modal' role = 'dialog'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>
                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>Save Workflow</h4>
                </div>
                <div class = 'modal-body'>

                  <form class = 'form-inline'>
                    <label for = 'save-comment'>Comment (Optional)</label>
                    <input id = 'save-comment' type = 'text' class = 'form-control' ng-model = 'save_comment'>
                  </form>

                  <br>

                  <div class = 'row'>
                    <div class = 'col-md-5'></div>
                    <button type = 'button' class = 'btn btn-primary col-md-2' ng-click = 'saveData()' data-dismiss = 'modal'>
                      Save
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Import Input File Modal -->
          <div class = 'modal fade' id = 'import-input-file-modal' role = 'dialog'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>
                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>Import Input File</h4>
                </div>
                <div class = 'modal-body'>

                  <div class = 'row'>
                    <div class = 'col-md-4'></div>
                    <input id = 'input-files' type = 'file' multiple>
                  </div>

                  <br>

                  <div class = 'row'>
                    <div class = 'col-md-5'></div>
                    <button type = 'button' class = 'btn btn-primary col-md-2' ng-click = 'importData()' data-dismiss = 'modal'>
                      Import
                    </button>
                  </div>

                  <p><sub>Only CSV and JSON formats are accepted.</sub></p>

                </div>
              </div>
            </div>
          </div>

          <!-- Import Workflow Modal -->
          <div class = 'modal fade' id = 'import-workflow-modal' role = 'dialog'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>
                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>Import Workflow</h4>
                </div>
                <div class = 'modal-body'>

                  <div class = 'row'>
                    <div class = 'col-md-4'></div>
                    <input id = 'input-workflow' type = 'file'>
                  </div>

                  <br>

                  <div class = 'row'>
                    <div class = 'col-md-5'></div>
                    <button type = 'button' class = 'btn btn-primary col-md-2' ng-click = 'selectImportWorkflow()' data-dismiss = 'modal'>
                      Import
                    </button>
                  </div>

                  <p><sub>Only ZIP format is accepted.</sub></p>

                </div>
              </div>
            </div>
          </div>

          <!-- Archive Modal -->
          <div class = 'modal fade' id = 'archive-modal' role = 'dialog'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>
                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>Archive</h4>
                </div>
                <div class = 'modal-body'>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Comment</th>
                        <th class = 'text-center'>Creation Date</th>
                        <th class = 'col-md-4'></th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-repeat = 'workflow in archive' ng-class = '{"danger" : workflow.id == delete_workflow}'>
                        <td>{{workflow.comment}}</td>
                        <td>{{workflow.date}} - {{workflow.time}}</td>
                        <td>
                          <div ng-if = 'workflow.id != delete_workflow'>
                            <!-- Reload Workflow Button -->
                            <button type = 'button' class = 'btn btn-primary' ng-click = 'openSaveConfirmation(workflow)' title = 'Reload Workflow' data-dismiss = 'modal'>
                              <span class = 'glyphicon glyphicon-repeat'></span>
                            </button>
                            <!-- Export Workflow Button -->
                            <button type = 'button' class = 'btn btn-warning' ng-click = 'exportWorkflow(workflow)' title = 'Export Workflow'>
                              <span class = 'glyphicon glyphicon-export'></span>
                            </button>
                            <!-- Delete Workflow Button -->
                            <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteWorkflow(workflow)' title = 'Delete Workflow'>
                              <span class = 'glyphicon glyphicon-minus'></span>
                            </button>
                          </div>

                          <div ng-if = 'workflow.id == delete_workflow'>
                            <!-- Confirm Workflow Deletion Button -->
                            <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteWorkflow(workflow)' title = 'Confirm Workflow Deletion'>
                              <span class = 'glyphicon glyphicon-ok'></span>
                            </button>

                            <!-- Cancel Workflow Deletion Button -->
                            <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteWorkflow()' title = 'Cancel Workflow Deletion'>
                              <span class = 'glyphicon glyphicon-remove'></span>
                            </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <div class = 'row'>
                    <div class = 'col-md-4'></div>
                    <div class = 'col-md-4'></div>
                    <div class = 'col-md-4'>
                      <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteAllWorkflows()'>Delete All Workflows</button>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>

          <!-- Save Confirmation Modal - Reload -->
          <div class = 'modal fade' id = 'save-confirmation-reload-modal' role = 'dialog'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>
                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>Do you want to save the current workflow before reloading the new one?</h4>
                </div>
                <div class = 'modal-body'>
                  <div class = 'row'>
                    <div class = 'col-md-2'></div>

                    <div class = 'col-md-4'>
                      <button type = 'button' class = 'btn btn-success' ng-click = 'confirmSaveReloadWorkflow()' data-dismiss = 'modal' title = 'Confirm Workflow Save'>
                        Yes
                      </button>
                    </div>

                    <div class = 'col-md-4'>
                      <button type = 'button' class = 'btn btn-danger' ng-click = 'reloadData(true, reload_workflow)' data-dismiss = 'modal' title = 'Cancel Workflow Save'>
                        No
                      </button>
                    </div>

                    <div class = 'col-md-2'></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Save Confirmation Modal - Import -->
          <div class = 'modal fade' id = 'save-confirmation-import-modal' role = 'dialog'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>
                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>Do you want to save the current workflow before importing the new one?</h4>
                </div>
                <div class = 'modal-body'>
                  <div class = 'row'>
                    <div class = 'col-md-2'></div>

                    <div class = 'col-md-4'>
                      <button type = 'button' class = 'btn btn-success' ng-click = 'confirmSaveImportWorkflow()' data-dismiss = 'modal' title = 'Confirm Module Deletion'>
                        Yes
                      </button>
                    </div>

                    <div class = 'col-md-4'>
                      <button type = 'button' class = 'btn btn-danger' ng-click = 'importWorkflow()' data-dismiss = 'modal' title = 'Cancel Module Deletion'>
                        No
                      </button>
                    </div>

                    <div class = 'col-md-2'></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Delete All Workflows Modal -->
          <div class = 'modal fade' id = 'delete-all-modal' role = 'dialog'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>
                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>Are you sure you want to delete all workflows of the current project?</h4>
                </div>
                <div class = 'modal-body'>
                  <div class = 'row'>
                    <div class = 'col-md-2'></div>

                    <div class = 'col-md-4'>
                      <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteAllWorkflows()' title = 'Confirm Workflows Deletion'>
                        Yes
                      </button>
                    </div>

                    <div class = 'col-md-4'>
                      <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteAllWorkflows()' title = 'Cancel Workflows Deletion'>
                        No
                      </button>
                    </div>

                    <div class = 'col-md-2'></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Module Modals -->

          <!-- Input File Modal -->
          <div id = 'inputfile-modal' class = 'modal fade custom-modal' role = 'dialog'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>

                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>{{currentModule.name}}</h4>
                </div>

                <div class = 'modal-body'>

                  <p class = 'header-1'>Data</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center' ng-repeat = '(key, value) in currentModule.output[0]' ng-if = 'key != "id"'>{{key}}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-repeat = 'item in currentModule.output'>
                        <td ng-repeat = '(key, value) in item' ng-if = 'key != "id"'>{{value}}</td>
                      </tr>
                    </tbody>
                  </table>

                </div>
              </div>
            </div>
          </div>

          <!-- OrderBy Modal -->
          <div id = 'orderby-modal' class = 'modal fade custom-modal'  role = 'dialog' ng-controller = 'OrderByController'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>

                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>OrderBy{{currentModule.name_id}}</h4>
                </div>

                <div class = 'modal-body'>

                  <!-- Criteria -->
                  <p class = 'header-1'>Criteria</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Order By</th>
                        <th class = 'text-center'>Criterion Name</th>
                        <th class = 'text-center'>Type</th>
                        <th class = 'text-center'>Direction</th>
                        <th class = 'col-md-2'></th>
                      </tr>
                    </thead>
                    <!-- Added Criteria -->
                    <tbody>
                      <tr ng-repeat = 'criterion in currentModule.input.criteria' ng-class = '{danger: criterion.id == deleteIdCriterion}'>
                        <td>
                          <input type = 'radio' ng-checked = 'criterion.selected == "true"' ng-click = 'selectOrderByCriterion(criterion)'>
                        </td>
                        <td>
                          <div id = 'orderby-criterion-{{criterion.id}}-name'>
                            <input class = 'form-control' type = 'text' ng-model = 'criterion.name' ng-blur = 'blurOrderByCriterionName(criterion)'>
                          </div>
                        </td>
                        <td>
                          <select class = 'form-control' ng-model = 'criterion.type'>
                            <option value = '' disabled>--- Please Select ---</option>
                            <option>Text</option>
                            <option>Number</option>
                          </select>
                        </td>
                        <td>
                          <select class = 'form-control' ng-model = 'criterion.direction'>
                            <option value = '' disabled>--- Please Select ---</option>
                            <option>Ascendant</option>
                            <option>Descendant</option>
                          </select>
                        </td>
                        <td ng-if = 'criterion.id != deleteIdCriterion'>
                          <!-- Duplicate Criterion Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyOrderByCriterion(criterion)' title = 'Duplicate Criterion'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Criterion Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(criterion, "Criteria")' title = 'Delete Criterion'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'criterion.id == deleteIdCriterion'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(criterion, "Criteria")' title = 'Confirm Delete Criterion'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Criteria")' title = 'Cancel Delete Criterion'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add criteria -->
                      <tr class = 'active'>
                        <td></td>
                        <td>
                          <div id = 'new-orderby-criterion-name' class = 'form-group'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_orderby_criterion.name'>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-orderby-criterion-type' class = 'form-group'>
                            <select class = 'form-control' ng-model = 'new_orderby_criterion.type'>
                              <option value = '' disabled>--- Please Select ---</option>
                              <option>Text</option>
                              <option>Number</option>
                            </select>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-orderby-criterion-direction' class = 'form-group'>
                            <select class = 'form-control' ng-model = 'new_orderby_criterion.direction'>
                              <option value = '' disabled>--- Please Select ---</option>
                              <option>Ascendant</option>
                              <option>Descendant</option>
                            </select>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addOrderByCriterion()' title = 'Add Criterion'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <!-- Actions -->
                  <p class = 'header-1'>Actions</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <th class = 'text-center'>Name</th>
                      <th class = 'text-center' ng-repeat = 'orderby_criterion in currentModule.input.criteria'>{{orderby_criterion.name}}</th>
                      <th class = 'col-md-2'></th>
                    </thead>
                    <tbody>
                      <!-- Added Actions -->
                      <tr ng-repeat = 'orderby_action in currentModule.input.actions' ng-class = '{danger: orderby_action.id == deleteIdAction}'>
                        <td>
                          <div id = 'orderby-action-{{orderby_action.id}}-name'>
                            <input class = 'form-control' ng-model = 'orderby_action.name' ng-blur = 'blurOrderByActionName(orderby_action)'>
                          </div>
                        </td>
                        <td ng-repeat = 'orderby_criterion in currentModule.input.criteria'>
                          <div id = 'orderby-action-{{orderby_action.id}}-criterion-{{orderby_criterion.id}}'>
                            <input class = 'form-control' ng-model = 'orderby_action[orderby_criterion.name]' ng-blur = 'blurOrderByActionCriterion(orderby_action, orderby_criterion)'>
                          </div>
                        </td>
                        <td ng-if = 'orderby_action.id != deleteIdAction'>
                           <!-- Duplicate Action Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyOrderByAction(orderby_action)' title = 'Duplicate Action'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Action Button -->
                          <button type = 'button' class = 'btn btn-danger btn-action-remove' ng-click = 'deleteInput(orderby_action, "Actions")' title = 'Delete Action'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'orderby_action.id == deleteIdAction'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(orderby_action, "Actions")' title = 'Confirm Delete Action'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Actions")' title = 'Cancel Delete Action'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add action -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-orderby-action-name' class = 'form-group'>
                            <input class = 'form-control' ng-model = 'new_orderby_action.name'>
                          </div>
                        </td>
                        <td ng-repeat = 'criterion in currentModule.input.criteria'>
                          <div id = 'new-orderby-action-criterion-{{criterion.id}}' class = 'form-group'>
                            <input class = 'form-control' ng-model = 'new_orderby_action[criterion.name]'>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success btn-action-add' ng-click = 'addOrderByAction()' title = 'Add Action'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <!-- OK button -->
                  <button type = 'button' class = 'btn btn-primary' data-dismiss = 'modal'>OK</button>

                </div>
              </div>
            </div>
          </div>

          <!-- Sort Modal -->
          <div id = 'sort-modal' class = 'modal fade custom-modal' role = 'dialog' ng-controller = 'SortController'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>

                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>Sort{{currentModule.name_id}}</h4>
                </div>

                <div class = 'modal-body'>

                  <!-- Objects -->
                  <p class = 'header-1'>Objects</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Name</th>
                        <th class = 'col-md-2'></th>
                      </tr>
                    </thead>
                    <!-- Added Objects -->
                    <tbody>
                      <tr ng-repeat = 'object in currentModule.input.objects | orderBy: "id"' ng-class = '{danger: object.id == deleteIdObject}'>
                        <td>
                          <div id = 'sort-object-{{object.id}}'>
                            <input class = 'form-control' type = 'text' ng-model = 'object.name' ng-blur = 'blurSortObjectName(object)'>
                          </div>
                        </td>
                        <td ng-if = 'object.id != deleteIdObject'>
                          <!-- Duplicate Object Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copySortObject(object)' title = 'Duplicate Object'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Object Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(object, "Objects")' title = 'Delete Object'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'object.id == deleteIdObject'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(object, "Objects")' title = 'Confirm Delete Object'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Objects")' title = 'Cancel Delete Object'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add object -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-sort-object-name' class = 'form-group'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_object.name'>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success btn-action-add' ng-click = 'addSortObject()' title = 'Add Object'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <!-- Order -->
                  <p class = 'header-1'>Order</p>

                  <div class = 'row text-center'>
                    <ul class = 'draglist'>
                      <li class = 'sort-drop' ng-repeat = 'obj in currentModule.input.objects' ng-drop = 'true' ng-drop-success = 'onDropComplete($index, $data, $event)'>
                        <div class = 'sort-drag' ng-drag = 'true' ng-drag-data = 'obj' ng-class = 'obj.name'>{{obj.name}}</div>

                        <div ng-if = 'currentModule.input.objects.length > 1'>
                          <p ng-if = '$index == 0' style = 'margin-top: 20%'>Most Important</p>
                          <p ng-if = '$index == currentModule.input.objects.length - 1' style = 'margin-top: 20%'>Least Important</p>
                        </div>
                      </li>
                    </ul>
                  </div>

                  <br><br>

                  <!-- OK button -->
                  <button type = 'button' class = 'btn btn-primary' data-dismiss = 'modal'>OK</button>

                </div>
              </div>
            </div>
          </div>

          <!-- CAT-SD Modal -->
          <div id = 'cat-sd-modal' class = 'modal fade custom-modal' role = 'dialog' ng-controller = 'CATSDController'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>

                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>CAT-SD{{currentModule.name_id}}</h4>
                </div>

                <div class = 'modal-body'>

                  <!-- Criteria -->
                  <p class = 'header-1'>Criteria</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Name</th>
                        <th class = 'text-center'>Direction</th>
                        <th class = 'col-md-2'></th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Added Criteria  -->
                      <tr ng-repeat = 'criterion in currentModule.input.criteria' ng-class = '{danger: criterion.id == deleteIdCriterion}'>
                        <td>
                          <div id = 'cat-criterion-{{criterion.id}}-name' class = 'form-group'>
                            <input class = 'form-control' type = 'text' ng-model = 'criterion.name' ng-blur = 'blurCATCriterionName(criterion)'>
                          </div>
                        </td>
                        <td>
                          <select class = 'form-control' ng-model = 'criterion.direction'>
                            <option disabled>--- Please Select ---</option>
                            <option>Minimize</option>
                            <option>Maximize</option>
                            <option>None</option>
                          </select>
                        </td>
                        <td ng-if = 'criterion.id != deleteIdCriterion'>
                          <!-- Duplicate Criterion Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyCATCriterion(criterion)' title = 'Duplicate Criterion'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Criterion Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(criterion, "Criteria")' title = 'Delete Criterion'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'criterion.id == deleteIdCriterion'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(criterion, "Criteria")' title = 'Confirm Delete Criterion'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Criteria")' title = 'Cancel Delete Criterion'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add a criterion -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-cat-criterion-name' class = 'form-group'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_cat_criterion.name'>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-cat-criterion-direction' class = 'form-group'>
                            <select class = 'form-control' ng-model = 'new_cat_criterion.direction'>
                              <option value = '' disabled>--- Please Select ---</option>
                              <option>Minimize</option>
                              <option>Maximize</option>
                              <option>None</option>
                            </select>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addCATCriterion()' title = 'Add Criterion'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <br>

                  <!-- Scales -->
                  <p class = 'header-1'>Scales</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Criterion</th>
                        <th class = 'text-center'>Type</th>
                        <th class = 'text-center'>Minimum Value</th>
                        <th class = 'text-center'>Maximum Value</th>
                        <th class = 'text-center'>Number of Categories</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-repeat = 'scale in currentModule.input.scales'>
                        <td>{{scale.criterion}}</td>
                        <td>
                          <div id = 'cat-scale-{{scale.id}}-type'>
                            <select class = 'form-control' ng-model = 'scale.type' ng-blur = 'blurCATScaleType(scale)'>
                              <option value = '' disabled>--- Please Select ---</option>
                              <option>Ordinal</option>
                              <option>Cardinal</option>
                            </select>
                          </div>
                        </td>
                        <td>
                          <div id = 'cat-scale-{{scale.id}}-min'>
                            <input class = 'form-control' type = 'number' ng-model = 'scale.min' ng-blur = 'blurCATScaleMin(scale)' ng-disabled = 'disableCATScaleOrdinal(scale)'>
                          </div>
                        </td>
                        <td>
                          <div id = 'cat-scale-{{scale.id}}-max'>
                            <input class = 'form-control' type = 'number' ng-model = 'scale.max' ng-blur = 'blurCATScaleMax(scale)' ng-disabled = 'disableCATScaleOrdinal(scale)'>
                          </div>
                        </td>
                        <td>
                          <div id = 'cat-scale-{{scale.id}}-categories'>
                            <input class = 'form-control' type = 'number' ng-model = 'scale.num_categories' ng-blur = 'blurCATScaleCategories(scale)' ng-disabled = 'disableCATScaleCardinal(scale)'>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <br>

                  <!-- Functions -->
                  <p class = 'header-1'>Functions</p>

                  <div ng-repeat = 'criterion in currentModule.input.criteria'>

                    <p class = 'header-2'>{{criterion.name}}</p>

                    <table class = 'table table-bordered table-hover'>
                      <thead>
                        <tr>
                          <th class = 'text-center' colspan = 2>Function</th>
                          <th class = 'text-center' colspan = 2>Condition</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <!-- Added Branches List -->
                        <tr ng-repeat = 'branch in currentModule.input.functions' ng-if = 'branch.criterion == criterion.name' ng-class = '{danger: branch.id == deleteIdBranch}'>
                          <td class = 'col-md-2'>
                            <div id = 'cat-branch-{{branch.id}}-function-{{criterion.id}}'>
                              <input class = 'form-control' type = 'text' ng-model = 'branch.function' ng-blur = 'blurCATBranchFunction(branch, criterion)'>
                            </div>
                          </td>
                          <td class = 'col-md-3'>
                            <p math-jax-bind = 'branch.function'></p>
                          </td>
                          <td class = 'col-md-2'>
                            <div id = 'cat-branch-{{branch.id}}-condition-{{criterion.id}}'>
                              <input class = 'form-control' type = 'text' ng-model = 'branch.condition' ng-blur = 'blurCATBranchCondition(branch, criterion)'>
                            </div>
                          </td>
                          <td class = 'col-md-3'>
                            <p math-jax-bind = 'branch.condition'></p>
                          </td>
                          <td class = 'col-md-2' ng-if = 'branch.id != deleteIdBranch'>
                            <!-- Duplicate Branch Button -->
                            <button type = 'button' class = 'btn btn-info' ng-click = 'copyCATBranch(branch)' title = 'Duplicate Branch'>
                              <span class = 'glyphicon glyphicon-duplicate'></span>
                            </button>
                            <!-- Delete Branch Button -->
                            <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(branch, "Branches")' title = 'Delete Branch'>
                              <span class = 'glyphicon glyphicon-minus'></span>
                            </button>
                          </td>
                          <td class = 'col-md-2' ng-if = 'branch.id == deleteIdBranch'>
                            <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(branch, "Branches")' title = 'Confirm Delete Branch'>
                              <span class = 'glyphicon glyphicon-ok'></span>
                            </button>
                            <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Branches")' title = 'Cancel Delete Branch'>
                              <span class = 'glyphicon glyphicon-remove'></span>
                            </button>
                          </td>
                        </tr>
                        <!-- Form to add function branches -->
                        <tr class = 'active'>
                          <td class = 'col-md-2'>
                            <div id = 'new-cat-branch-function-{{criterion.id}}'>
                              <input class = 'form-control' type = 'text' ng-model = 'new_branch[criterion.id].function'>
                            </div>
                          </td>
                          <td class = 'col-md-3'>
                            <p math-jax-bind = 'new_branch[criterion.id].function'></p>
                          </td>
                          <td class = 'col-md-2'>
                            <div id = 'new-cat-branch-condition-{{criterion.id}}'>
                              <input class = 'form-control' type = 'text' ng-model = 'new_branch[criterion.id].condition'>
                            </div>
                          </td>
                          <td class = 'col-md-3'>
                            <p math-jax-bind = 'new_branch[criterion.id].condition'></p>
                          </td>
                          <td class = 'col-md-2'>
                            <button type = 'button' class = 'btn btn-success' ng-click = 'addCATBranch(criterion)' title = 'Add Branch'>
                              <span class = 'glyphicon glyphicon-plus'></span>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <br>

                  <!-- Actions -->
                  <p class = 'header-1'>Actions</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Action</th>
                        <th class = 'text-center' ng-repeat = 'criterion in currentModule.input.criteria'>{{criterion.name}}</th>
                        <th class = 'col-md-2'></th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Added Actions -->
                      <tr ng-repeat = 'action in currentModule.input.actions' ng-class = '{danger: action.id == deleteIdAction}'>
                        <td>
                          <div id = 'cat-action-{{action.id}}-name'>
                            <input class = 'form-control' type = 'text' ng-model = 'action.name' ng-blur = 'blurCATActionName(action)'>
                          </div>
                        </td>
                        <td ng-repeat = 'criterion in currentModule.input.criteria'>
                          <div id = 'cat-action-{{action.id}}-criterion-{{criterion.id}}'>
                            <input class = 'form-control' type = 'number' ng-model = 'action[criterion.name]' ng-blur = 'blurCATActionCriterion(action, criterion.name)'>
                          </div>
                        </td>
                        <td ng-if = 'action.id != deleteIdAction'>
                         <!-- Duplicate Action Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyCATAction(action)' title = 'Duplicate Action'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Action Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(action, "Actions")' title = 'Delete Action'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'action.id == deleteIdAction'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(action, "Actions")' title = 'Confirm Delete Action'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Actions")' title = 'Cancel Delete Action'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add action -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-cat-action-name'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_cat_action.name'>
                          </div>
                        </td>
                        <td ng-repeat = 'criterion in currentModule.input.criteria'>
                          <div id = 'new-cat-action-criterion-{{criterion.id}}'>
                            <input class = 'form-control' type = 'number' ng-model = 'new_cat_action[criterion.name]'>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addCATAction()' title = 'Add Action'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <br>

                  <!-- Categories -->
                  <p class = 'header-1'>Categories</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center' rowspan = '2'>Category</th>
                        <th class = 'text-center' rowspan = '2'>Membership Degree</th>
                        <th class = 'text-center' colspan = '{{currentModule.input.criteria.length}}'>Criteria Weights</th>
                        <th class = 'col-md-2' rowspan = '2'></th>
                      </tr>
                      <tr>
                        <th class = 'text-center' ng-repeat = 'criterion in currentModule.input.criteria'>{{criterion.name}}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Added Categories -->
                      <tr ng-repeat = 'category in currentModule.input.categories' ng-class = '{danger: category.id == deleteIdCategory}'>
                        <td>
                          <div id = 'cat-category-{{category.id}}-name'>
                            <input class = 'form-control' type = 'text' ng-model = 'category.name' ng-blur = 'blurCATCategoryName(category)'>
                          </div>
                        </td>
                        <td>
                          <div id = 'cat-category-{{category.id}}-membership-degree'>
                            <input class = 'form-control' type = 'number' ng-model = 'category.membership_degree' ng-blur = 'blurCATCategoryMembership(category)'>
                          </div>
                        </td>
                        <td ng-repeat = 'criterion in currentModule.input.criteria'>
                          <div id = 'cat-category-{{category.id}}-criterion-{{criterion.id}}'>
                            <input class = 'form-control' type = 'number' ng-model = 'category[criterion.name]' ng-blur = 'blurCATCategoryCriterion(category, criterion)'>
                          </div>
                        </td>
                        <td ng-if = 'category.id != deleteIdCategory'>
                          <!-- Duplicate Category Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyCATCategory(category)' title = 'Duplicate Category'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Category Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(category, "Categories")' title = 'Delete Category'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'category.id == deleteIdCategory'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(category, "Categories")' title = 'Confirm Delete Category'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Categories")' title = 'Cancel Delete Category'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add new category -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-cat-category-name'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_category.name'>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-cat-category-membership-degree'>
                            <input class = 'form-control' type = 'number' ng-model = 'new_category.membership_degree'>
                          </div>
                        </td>
                        <td ng-repeat = 'criterion in currentModule.input.criteria'>
                          <div id = 'new-cat-category-{{criterion.id}}'>
                            <input class = 'form-control' type = 'number' ng-model = 'new_category[criterion.name]'>
                          </div>
                        </td>
                        <td ng-if = 'currentModule.input.criteria.length == 0'></td>
                        <td>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addCATCategory()' title = 'Add Category'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <br>

                  <!-- Interaction Effects -->
                  <p class = 'header-1'>Interaction Effects</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <th class = 'text-center'>Type of Effect</th>
                      <th class = 'text-center'>Criterion 1</th>
                      <th class = 'text-center'>Criterion 2</th>
                      <th class = 'text-center'>Category</th>
                      <th class = 'text-center'>Value</th>
                      <th class = 'col-md-2'></th>
                    </thead>
                    <tbody>
                      <!-- Added Interaction Effects -->
                      <tr ng-repeat = 'interaction in currentModule.input["interaction effects"]' ng-class = '{danger: interaction.id == deleteIdInteractionEffect}'>
                        <td>
                          <select class = 'form-control' ng-model = 'interaction.type' ng-blur = 'blurCATInteractionValue(interaction)'>
                            <option disabled>--- Please Select ---</option>
                            <option>Mutual-Strengthening Effect</option>
                            <option>Mutual-Weakening Effect</option>
                            <option>Antagonistic Effect</option>
                          </select>
                        </td>
                        <td>
                          <select class = 'form-control' ng-model = 'interaction.criterion1'>
                            <option disabled>--- Please Select ---</option>
                            <option ng-repeat = 'criterion in currentModule.input.criteria' ng-if = 'criterion.name != interaction.criterion2'>{{criterion.name}}</option>
                          </select>
                        </td>
                        <td>
                          <select class = 'form-control' ng-model = 'interaction.criterion2'>
                            <option disabled>--- Please Select ---</option>
                            <option ng-repeat = 'criterion in currentModule.input.criteria' ng-if = 'criterion.name != interaction.criterion1'>{{criterion.name}}</option>
                          </select>
                        </td>
                        <td>
                          <select class = 'form-control' ng-model = 'interaction.category'>
                            <option disabled>--- Please Select ---</option>
                            <option ng-repeat = 'category in currentModule.input.categories'>{{category.name}}</option>
                          </select>
                        </td>
                        <td>
                          <div id = 'cat-interaction-{{interaction.id}}-value'>
                            <input class = 'form-control' type = 'number' ng-model = 'interaction.value' ng-blur = 'blurCATInteractionValue(interaction)'>
                          </div>
                        </td>
                        <td ng-if = 'interaction.id != deleteIdInteractionEffect'>
                          <!-- Duplicate Interaction Effect Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyCATInteraction(interaction)' title = 'Duplicate Interaction Effect'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Interaction Effect Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(interaction, "Interaction Effects")' title = 'Delete Interaction Effect'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'interaction.id == deleteIdInteractionEffect'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(interaction, "Interaction Effects")' title = 'Confirm Delete Interaction Effect'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Interaction Effects")' title = 'Cancel Delete Interaction Effect'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add interaction -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-cat-interaction-type' class = 'form-group'>
                            <select class = 'form-control' ng-model = 'new_interaction_effect.type'>
                              <option value = '' disabled>--- Please Select ---</option>
                              <option>Mutual-Strengthening Effect</option>
                              <option>Mutual-Weakening Effect</option>
                              <option>Antagonistic Effect</option>
                            </select>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-cat-interaction-criterion1'>
                            <select class = 'form-control' ng-model = 'new_interaction_effect.criterion1'>
                              <option value = '' disabled>--- Please Select ---</option>
                              <option ng-repeat = 'criterion in currentModule.input.criteria' ng-if = 'criterion.name != new_interaction_effect.criterion2'>{{criterion.name}}</option>
                            </select>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-cat-interaction-criterion2'>
                            <select class = 'form-control' ng-model = 'new_interaction_effect.criterion2'>
                              <option value = '' disabled>--- Please Select ---</option>
                              <option ng-repeat = 'criterion in currentModule.input.criteria' ng-if = 'criterion.name != new_interaction_effect.criterion1'>{{criterion.name}}</option>
                            </select>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-cat-interaction-category'>
                            <select class = 'form-control' ng-model = 'new_interaction_effect.category'>
                              <option value = '' disabled>--- Please Select ---</option>
                              <option ng-repeat = 'category in currentModule.input.categories'>{{category.name}}</option>
                            </select>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-cat-interaction-value'>
                            <input class = 'form-control' type = 'number' ng-model = 'new_interaction_effect.value'>
                          </div>
                        </td>
                        <td class = 'col-md-2'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addCATInteractionEffect()' title = 'Add Interaction Effect'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <br>

                  <!-- Reference Actions -->
                  <p class = 'header-1'>Reference Actions</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <th class = 'text-center'>Category</th>
                      <th class = 'text-center' ng-repeat = 'criterion in currentModule.input.criteria'>{{criterion.name}}</th>
                      <th class = 'col-md-2'></th>
                    </thead>
                    <tbody ng-repeat = 'category in currentModule.input.categories'>
                      <!-- Added Reference Actions -->
                      <tr ng-repeat = 'ref in getCategoryReferenceActions(category.name)' ng-class = '{danger: ref.id == deleteIdReferenceAction}' ng-if = 'ref.category == category.name'>
                        <td>{{category.name}} ({{ref.name}})</td>
                        <td ng-repeat = 'criterion in currentModule.input.criteria'>
                          <div id = 'cat-ref-{{ref.id}}-{{category.id}}-criterion-{{criterion.id}}'>
                            <input class = 'form-control' type = 'number' ng-model = 'ref[criterion.name]' ng-blur = 'blurCATReferenceAction(ref, category, criterion)'>
                          </div>
                        </td>
                        <td ng-if = 'ref.id != deleteIdReferenceAction'>
                          <!-- Duplicate Reference Action Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyCATReferenceAction(ref, category)' title = 'Duplicate Reference Action'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Reference Action Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(ref, "Reference Actions")' title = 'Delete Reference Action'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'ref.id == deleteIdReferenceAction'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(ref, "Reference Actions")' title = 'Confirm Delete Reference Action'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Reference Actions")' title = 'Cancel Delete Reference Action'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add new reference action -->
                      <tr class = 'active'>
                        <td>{{category.name}}</td>
                        <td ng-repeat = 'criterion in currentModule.input.criteria'>
                          <div id = 'new-cat-ref-{{category.id}}-criterion-{{criterion.id}}'>
                            <input class = 'form-control' type = 'number' ng-model = 'new_reference_action[category.id][criterion.name]'>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addCATReferenceAction(category)' title = 'Add Reference Action'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <!-- OK button -->
                  <button type = 'button' class = 'btn btn-primary' data-dismiss = 'modal'>OK</button>

                </div>
              </div>
            </div>
          </div>

          <!-- Inquiry Modal -->
          <div id = 'inquiry-modal' class = 'modal fade custom-modal'  role = 'dialog' ng-controller = 'InquiryController'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>

                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>Inquiry{{currentModule.name_id}}</h4>
                </div>

                <div class = 'modal-body'>
                  <!-- Current Round -->
                  <p class = 'header-1'>Round {{currentModule.input.current_round + 1}}</p>

                  <!-- Survey Subject -->
                  <p class = 'header-1'>Survey Subject</p>

                  <div class = 'row'>
                    <div class = 'col-md-4'></div>

                    <div id = 'inquiry-subject' class = 'col-md-4'>
                      <input type = 'text' class = 'form-control' ng-model = 'currentModule.input.subject' ng-blur = 'blurInquirySubject()'>
                    </div>

                    <div class = 'col-md-4'></div>
                  </div>

                  <br>
                  
                  <!-- Survey Description -->
                  <p class = 'header-1'>Survey Description</p>
                  
                  <div class = 'row'>
                    <div class = 'col-md-1'></div>
                    
                    <div class = 'col-md-10'>
                      <textarea class = 'form-control' rows = '4' ng-model = 'currentModule.input.description'></textarea>
                    </div>
                    
                    <div class = 'col-md-1'></div>
                  </div>
                  
                  <br>

                  <!-- Specialists' Emails -->
                  <p class = 'header-1'>Specialists' Emails</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Email Address</th>
                        <th class = 'col-md-2'></th>
                      </tr>
                    </thead>
                    <!-- Added Emails -->
                    <tbody>
                      <tr ng-repeat = 'email in currentModule.input.emails' ng-class = '{danger: email.id == deleteIdEmail}'>
                        <td>
                          <div id = 'inquiry-email-{{email.id}}'>
                            <input type = 'text' class = 'form-control' ng-model = 'email.address' ng-blur = 'blurInquiryEmail(email)'>
                          </div>
                        </td>
                        <td ng-if = 'email.id != deleteIdEmail'>
                          <!-- Duplicate Email Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyInquiryEmail(email)' title = 'Duplicate Email'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Email Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(email, "Emails")' title = 'Delete Email'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'email.id == deleteIdEmail'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(email, "Emails")' title = 'Confirm Delete Email'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Emails")' title = 'Cancel Delete Email'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add new email -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-inquiry-email'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_inquiry_email.address'>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addInquiryEmail()' title = 'Add Email'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <br>

                  <!-- Characterization Questions -->
                  <p class = 'header-1'>Characterization Questions</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Question</th>
                        <th class = 'text-center'>Type</th>
                        <th class = 'col-md-2'></th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Added Characterization Questions -->
                      <tr ng-repeat = 'open_answer_question in currentModule.input.open_answer_questions' ng-class = '{danger: open_answer_question.id == deleteIdOpenAnswerQuestion}'>
                        <td>
                          <div id = 'inquiry-open-answer-question-{{open_answer_question.id}}'>
                            <input type = 'text' class = 'form-control' ng-model = 'open_answer_question.question' ng-blur = 'blurInquiryOpenAnswerQuestion(open_answer_question)'>
                          </div>
                        </td>
                        <td>
                          <select class = 'form-control' ng-model = 'open_answer_question.type' ng-blur = ''>
                            <option value = '' selected disabled>--- Please Select ---</option>
                            <option>Open Answer</option>
                            <option>Multiple Choice</option>
                          </select>
                        </td>
                        <td ng-if = 'open_answer_question.id != deleteIdOpenAnswerQuestion'>
                          <!-- Duplicate Characterization Question Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyInquiryCharacterizationQuestion(open_answer_question)' title = 'Duplicate Question'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Characterization Question Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(open_answer_question, "Open Answer Questions")' title = 'Delete Question'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'open_answer_question.id == deleteIdOpenAnswerQuestion'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(open_answer_question, "Open Answer Questions")' title = 'Confirm Delete Open Answer Question'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Open Answer Questions")' title = 'Cancel Delete Open Answer Question'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add new open answer question -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-inquiry-open-answer-question'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_inquiry_open_answer_question.question'>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-inquiry-open-answer-type'>
                            <select class = 'form-control' ng-model = 'new_inquiry_open_answer_question.type'>
                              <option value = '' selected disabled>--- Please Select ---</option>
                              <option>Open Answer</option>
                              <option>Multiple Choice</option>
                            </select>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addInquiryOpenAnswerQuestion()' title = 'Add Open Answer Question'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <div ng-repeat = 'open_answer_question in currentModule.input.open_answer_questions' ng-if = 'open_answer_question.type == "Multiple Choice"'>
                    <p class = 'header-2'>Choices of the question: {{open_answer_question.question}}</p>

                    <table class = 'table table-bordered table-hover'>
                      <thead>
                        <tr>
                          <th class = 'text-center'>Choices</th>
                          <th class = 'col-md-2'></th>
                        </tr>
                      </thead>
                      <tbody>
                        <!-- Added Choices -->
                        <tr ng-repeat = 'choice in open_answer_question.choices' ng-class = '{danger: open_answer_question.id == deleteIdChoice[0] && choice.id == deleteIdChoice[1]}'>
                          <td>
                            <div id = 'inquiry-choice-{{open_answer_question.id}}-{{choice.id}}'>
                              <input type = 'text' class = 'form-control' ng-model = 'choice.text' ng-blur = ''>
                            </div>
                          </td>
                          <td ng-if = 'open_answer_question.id != deleteIdChoice[0] || choice.id != deleteIdChoice[1]'>
                            <!-- Duplicate Choice Button -->
                            <button type = 'button' class = 'btn btn-info' ng-click = 'copyInquiryChoice(open_answer_question, choice)' title = 'Duplicate Choice'>
                              <span class = 'glyphicon glyphicon-duplicate'></span>
                            </button>
                            <!-- Delete Choice Button -->
                            <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput([open_answer_question, choice], "Choice")' title = 'Delete Choice'>
                              <span class = 'glyphicon glyphicon-minus'></span>
                            </button>
                          </td>
                          <td ng-if = 'open_answer_question.id == deleteIdChoice[0] && choice.id == deleteIdChoice[1]'>
                            <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput([open_answer_question, choice], "Choice")' title = 'Confirm Delete Choice'>
                              <span class = 'glyphicon glyphicon-ok'></span>
                            </button>
                            <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Choice")' title = 'Cancel Delete Choice'>
                              <span class = 'glyphicon glyphicon-remove'></span>
                            </button>
                          </td>
                        </tr>
                        <!-- Form to add new open answer question -->
                        <tr class = 'active'>
                          <td>
                            <div id = 'new-inquiry-choice'>
                              <input class = 'form-control' type = 'text' ng-model = 'new_inquiry_choice[open_answer_question.id].text'>
                            </div>
                          </td>
                          <td>
                            <button type = 'button' class = 'btn btn-success' ng-click = 'addInquiryChoice(open_answer_question)' title = 'Add Choice'>
                              <span class = 'glyphicon glyphicon-plus'></span>
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <br>

                  <!-- Q-Sort Questions -->
                  <p class = 'header-1'>Q-Sort Questions</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Title</th>
                        <th class = 'text-center'>Description</th>
                        <th class = 'col-md-2'></th>
                      </tr>
                    </thead>
                    <!-- Added Questions -->
                    <tbody>
                      <tr ng-repeat = 'question in currentModule.input.questions' ng-class = '{danger: question.id == deleteIdQuestion}'>
                        <td>
                          <div id = 'inquiry-question-title-{{question.id}}'>
                            <input type = 'text' class = 'form-control' ng-model = 'question.title' ng-blur = 'blurInquiryQuestionTitle(question)'>
                          </div>
                        </td>
                        <td>
                          <div id = 'inquiry-question-description-{{question.id}}'>
                            <input type = 'text' class = 'form-control' ng-model = 'question.description' ng-blur = 'blurInquiryQuestionDescription(question)'>
                          </div>
                        </td>
                        <td ng-if = 'question.id != deleteIdQuestion'>
                          <!-- Duplicate Q-Sort Question Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyInquiryQuestion(question)' title = 'Duplicate Q-Sort Question'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Q-Sort Question Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(question, "Questions")' title = 'Delete Q-Sort Question'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'question.id == deleteIdQuestion'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(question, "Questions")' title = 'Confirm Delete Question'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Questions")' title = 'Cancel Delete Question'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add new question -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-inquiry-question-title'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_inquiry_question.title'>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-inquiry-question-description'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_inquiry_question.description'>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addInquiryQuestion()' title = 'Add Question'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <br>

                  <!-- Q-Sort Colors -->
                  <p class = 'header-1'>Q-Sort Color Scheme</p>

                  <form class = 'form-horizontal'>
                    <div class = 'form-group'>
                      <label for = 'most-important' class = 'control-label col-md-6'>Most Important Questions</label>
                      <input type = 'color' class = 'col-md-1' ng-model = 'currentModule.input.color_scheme.most_important' style = 'margin-top: 0.5%'>
                    </div>

                    <div class = 'form-group'>
                      <label for = 'neutral' class = 'control-label col-md-6'>Neutral Questions</label>
                      <input type = 'color' class = 'col-md-1' ng-model = 'currentModule.input.color_scheme.neutral' style = 'margin-top: 0.5%'>
                    </div>

                    <div class = 'form-group'>
                      <label for = 'least-important' class = 'control-label col-md-6'>Least Important Questions</label>
                      <input type = 'color' class = 'col-md-1' ng-model = 'currentModule.input.color_scheme.least_important' style = 'margin-top: 0.5%'>
                    </div>
                  </form>

                  <br>

                  <!-- Q-Sort Scale -->
                  <p class = 'header-1'>Q-Sort Scale</p>

                  <div id = 'inquiry-scale' class = 'row'>
                    <div class = 'row col-md-offset-4 col-md-4 col-md-offset-4'>
                      <select class = 'form-control' ng-model = 'currentModule.input.scale' ng-blur = 'blurInquiryScale(currentModule.input.scale)'>
                        <option value = '' selected disabled>--- Please Select ---</option>
                        <option>Default</option>
                        <option>3 values</option>
                      </select>
                    </div>
                  </div>

                  <hr>

                  <!-- Glossary -->
                  <p class = 'header-1'>Glossary</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Name</th>
                        <th class = 'text-center'>Description</th>
                        <th class = 'col-md-2'></th>
                      </tr>
                    </thead>
                    <!-- Added Concepts -->
                    <tbody>
                      <tr ng-repeat = 'gloss in currentModule.input.glossary' ng-class = '{danger: gloss.id == deleteIdGlossaryConcept}'>
                        <td>
                          <div id = 'inquiry-glossary-name-{{gloss.id}}'>
                            <input type = 'text' class = 'form-control' ng-model = 'gloss.name' ng-blur = 'blurInquiryGlossaryName(gloss)'>
                          </div>
                        </td>
                        <td>
                          <div id = 'inquiry-glossary-description-{{gloss.id}}'>
                            <input type = 'text' class = 'form-control' ng-model = 'gloss.description' ng-blur = 'blurInquiryGlossaryDescription(gloss)'>
                          </div>
                        </td>
                        <td ng-if = 'gloss.id != deleteIdGlossaryConcept'>
                          <!-- Duplicate Glossary Concept Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copyInquiryConcept(gloss)' title = 'Duplicate Glossary Concept'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Glossary Concept Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(gloss, "Glossary")' title = 'Delete Glossary Concept'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'gloss.id == deleteIdGlossaryConcept'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(gloss, "Glossary")' title = 'Confirm Delete Glossary Concept'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Glossary")' title = 'Cancel Delete Glossary Concept'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add new question -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-inquiry-glossary-name'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_inquiry_glossary.name'>
                          </div>
                        </td>
                        <td>
                          <div id = 'new-inquiry-glossary-description'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_inquiry_glossary.description'>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addInquiryGlossary()' title = 'Add Glossary Concept'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <hr>

                  <!-- Suggestions Toggle -->
                  <p class = 'header-1'>Suggestions</p>

                  <label for = 'suggestions-check'>Ask for suggestions?</label>
                  <input id = 'suggestions-check' type = 'checkbox' ng-model = 'currentModule.input.suggestions.toggle'>

                  <form class = 'form-horizontal' ng-if = 'currentModule.input.suggestions.toggle'>
                    <div class = 'form-group'>
                      <label for = 'suggestions-question' class = 'col-md-3 control-label'>How to ask for the suggestions?</label>
                      <div class = 'col-md-9'>
                        <input id = 'suggestions-question' class = 'form-control' ng-model = 'currentModule.input.suggestions.question'>
                      </div>
                    </div>

                    <div class = 'form-group'>
                      <label for = 'suggestions-title' class = 'col-md-3 control-label'>Name of the suggestions' titles</label>
                      <div class = 'col-md-9'>
                        <input id = 'suggestions-question' class = 'form-control' ng-model = 'currentModule.input.suggestions.title'>
                      </div>
                    </div>
                  </form>

                  <hr>

                  <!-- Personalized Email -->
                  <p class = 'header-1'>Personalized Email</p>

                  <label for = 'email-check'>Personalize Email?</label>
                  <input id = 'email-check' type = 'checkbox' ng-model = 'currentModule.input.personalized_email'>

                  <form class = 'form-horizontal' ng-if = 'currentModule.input.personalized_email'>
                    <div class = 'form-group'>
                      <label for = 'email-subject' class = 'col-md-2 control-label'>Email Subject</label>
                      <div class = 'col-md-10'>
                        <input id = 'email-subject' class = 'form-control' ng-model = 'currentModule.input.email.subject'>
                      </div>
                    </div>

                    <div class = 'form-group'>
                      <label for = 'email-text' class = 'col-md-2 control-label'>Email Text</label>
                      <div class = 'col-md-10'>
                        <textarea id = 'email-text' rows = '3' class = 'form-control' ng-model = 'currentModule.input.email.text'></textarea>
                      </div>
                    </div>
                  </form>

                  <br>

                  <!-- OK button -->
                  <button type = 'button' class = 'btn btn-primary' data-dismiss = 'modal'>OK</button>

                </div>
              </div>
            </div>
          </div>

          <!-- SRF Modal -->
          <div id = 'srf-modal' class = 'modal fade custom-modal'  role = 'dialog' ng-controller = 'SRFController'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>

                <div class = 'modal-header'>
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <h4 class = 'modal-title'>SRF{{currentModule.name_id}}</h4>
                </div>

                <div class = 'modal-body'>

                  <!-- Criteria -->
                  <p class = 'header-1'>Criteria</p>

                  <table class = 'table table-bordered table-hover'>
                    <thead>
                      <tr>
                        <th class = 'text-center'>Name</th>
                        <th class = 'col-md-2'></th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Added Criteria  -->
                      <tr ng-repeat = 'criterion in currentModule.input.criteria' ng-class = '{danger: criterion.id == deleteIdCriterion}'>
                        <td>
                          <div id = 'srf-criterion-{{criterion.id}}-name' class = 'form-group'>
                            <input class = 'form-control' type = 'text' ng-model = 'criterion.name' ng-blur = 'blurSRFCriterionName(criterion)'>
                          </div>
                        </td>
                        <td ng-if = 'criterion.id != deleteIdCriterion'>
                           <!-- Duplicate Criterion Button -->
                          <button type = 'button' class = 'btn btn-info' ng-click = 'copySRFCriterion(criterion)' title = 'Duplicate Criterion'>
                            <span class = 'glyphicon glyphicon-duplicate'></span>
                          </button>
                          <!-- Delete Criterion Button -->
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'deleteInput(criterion, "Criteria")' title = 'Delete Criterion'>
                            <span class = 'glyphicon glyphicon-minus'></span>
                          </button>
                        </td>
                        <td ng-if = 'criterion.id == deleteIdCriterion'>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'confirmDeleteInput(criterion, "Criteria")' title = 'Confirm Delete Criterion'>
                            <span class = 'glyphicon glyphicon-ok'></span>
                          </button>
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'cancelDeleteInput("Criteria")' title = 'Cancel Delete Criterion'>
                            <span class = 'glyphicon glyphicon-remove'></span>
                          </button>
                        </td>
                      </tr>
                      <!-- Form to add a criterion -->
                      <tr class = 'active'>
                        <td>
                          <div id = 'new-srf-criterion-name' class = 'form-group'>
                            <input class = 'form-control' type = 'text' ng-model = 'new_srf_criterion.name'>
                          </div>
                        </td>
                        <td>
                          <button type = 'button' class = 'btn btn-success' ng-click = 'addSRFCriterion()' title = 'Add Criterion'>
                            <span class = 'glyphicon glyphicon-plus'></span>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <br>

                  <!-- Ranking -->
                  <p class = 'header-1'>Ranking</p>

                  <!-- Criteria Cards -->
                  <p>Criteria Cards</p>
                  <div class = 'srf-drop' ng-drop = 'true' ng-drop-success = 'originalCriteriaDrop($data)'>
                    <ul class = 'draggable-objects'>
                      <li ng-repeat = 'criterion in currentModule.input.criteria' ng-if = 'criterion.position == -1'>
                        <div class = 'srf-drag criteria-card' ng-drag = 'true' ng-drag-data = 'criterion' data-allow-transform = 'true' title = '{{criterion.name}}'>
                        {{criterion.name}}
                        </div>
                      </li>
                    </ul>
                  </div>

                  <br>

                  <!-- White Cards -->
                  <p>White Cards</p>
                  <div class = 'srf-drop' ng-drop = 'true' ng-drop-success = 'originalWhiteDrop($data)'>
                    <ul class = 'draggable-objects'>
                      <li>
                        <div class = 'srf-drag white-card' ng-drag = 'true' ng-drag-data = 'white_card' data-allow-transform = 'true'></div>
                      </li>
                    </ul>
                  </div>

                  <br>

                  <!-- Drop Divs -->
                  <div class = 'row' ng-repeat = 'rank in rangeRepeater(currentModule.input.ranking) track by $index' style = 'margin-top: 1%'>
                    <div class = 'col-md-2'>
                      <p ng-if = '$index == 0'>Most Important</p>
                      <p ng-if = '$index == currentModule.input.ranking - 1'>Least Important</p>
                    </div>

                    <div class = 'col-md-9'>
                      <div class = 'srf-drop' ng-drop = 'true' ng-drop-success = 'rankingDrop($data, $index)'>
                        <ul class = 'draggable-objects'>
                          <!-- Dragged Criteria -->
                          <li ng-repeat = 'criterion in currentModule.input.criteria' ng-if = 'criterion.position == $parent.$index'>
                            <div class = 'srf-drag criteria-card' ng-drag = 'true' ng-drag-data = 'criterion' data-allow-transform = 'true' title = '{{criterion.name}}'>
                              {{criterion.name}}
                            </div>
                          </li>
                          <!-- Dragged White Cards -->
                          <li ng-repeat = 'white_card in currentModule.input["white cards"]' ng-if = 'white_card.position == $parent.$index'>
                            <div class = 'srf-drag white-card' ng-drag = 'true' ng-drag-data = 'white_card' data-allow-transform = 'true'></div>
                          </li>
                        </ul>
                      </div>

                      <!-- Add Drop Div Button -->
                      <button type = 'button' class = 'btn btn-success' ng-click = 'addRanking($index)' title = 'Add Ranking' ng-if = '$index != ranking - 1' style = 'margin-top: 1%; margin-left: 105.2%'>
                        <span class = 'glyphicon glyphicon-plus'></span>
                      </button>
                    </div>

                    <div class = 'col-md-1'>
                      <!-- Delete Drop Div Button -->
                      <button type = 'button' class = 'btn btn-danger' ng-click = 'removeRanking($index)' title = 'Remove Ranking' ng-if = '$index != 0 && $index != currentModule.input.ranking - 1' style = 'margin-top: 20%'>
                        <span class = 'glyphicon glyphicon-minus'></span>
                      </button>
                    </div>
                  </div>

                  <br>

                  <!-- Other Parameters -->
                  <p class = 'header-1'>Other Parameters</p>

                  <table class = 'table'>
                    <thead>
                      <th class = 'col-md-3' style = 'border: none'></th>
                      <th class = 'col-md-3' style = 'border: none'></th>
                      <th class = 'col-md-3' style = 'border: none'></th>
                      <th class = 'col-md-3' style = 'border: none'></th>
                    </thead>
                    <tbody>
                      <tr>
                        <!-- Ratio Z -->
                        <td style = 'border: none'></td>
                        <td style = 'border: none'><strong>Ratio Z</strong></td>
                        <td style = 'border: none'>
                          <div id = 'srf-ratio-z'>
                            <input type = 'number' class = 'form-control' ng-model = 'currentModule.input["ratio z"]' ng-blur = 'blurSRFRatioZ()'>
                          </div>
                        </td>
                        <td style = 'border: none'></td>
                      </tr>
                      <tr>
                        <!-- Decimal Places -->
                        <td style = 'border: none'></td>
                        <td style = 'border: none'><strong>Decimal Places</strong></td>
                        <td style = 'border: none'>
                          <div id = 'srf-decimal-places'>
                            <select class = 'form-control' ng-model = 'currentModule.input["decimal places"]' ng-blur = 'blurSRFDecimalPlaces()'>
                              <option value = '' selected disabled>--- Please Select ---</option>
                              <option>0</option>
                              <option>1</option>
                              <option>2</option>
                            </select>
                          </div>
                        </td>
                        <td style = 'border: none'></td>
                      </tr>
                      <tr>
                        <!-- Weight Type -->
                        <td style = 'border: none'></td>
                        <td style = 'border: none'><strong>Weight Type</strong></td>
                        <td style = 'border: none'>
                          <div id = 'srf-weight-type'>
                            <select class = 'form-control' ng-model = 'currentModule.input["weight type"]' ng-blur = 'blurSRFWeightType()'>
                              <option value = '' selected disabled>--- Please Select ---</option>
                              <option>Non-Normalized</option>
                              <option>Normalized</option>
                              <option>Both</option>
                            </select>
                          </div>
                        </td>
                        <td style = 'border: none'></td>
                      </tr>
                    </tbody>
                  </table>

                  <!-- OK button -->
                  <button type = 'button' class = 'btn btn-primary' data-dismiss = 'modal'>OK</button>

                </div>
              </div>
            </div>
          </div>

          <!-- Output File Modal -->
          <div class = 'modal fade custom-modal' id = 'outputfile-modal' role = 'dialog'>
            <div class = 'modal-dialog'>
              <div class = 'modal-content'>
                <div class = 'modal-header'>
                  <!-- Close Button -->
                  <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                  <!-- Title -->
                  <h4 class = 'modal-title'>{{currentModule.name}}</h4>
                </div>

                <div class = 'modal-body'>
                  <div class = 'container'>

                    <!-- OrderBy Module -->
                    <div ng-if = 'currentModule.parent_type == "OrderBy"' ng-cloak>
                      <table class = 'table table-bordered table-hover'>
                        <thead>
                          <th class = 'text-center'>Action Name</th>
                          <th class = 'text-center' ng-repeat = 'criterion in currentModule.input.criteria'>{{criterion.name}}</th>
                        </thead>
                        <tbody>
                          <tr ng-repeat = 'action in currentModule.output'>
                            <td>{{action.name}}</td>
                            <td ng-repeat = 'criterion in currentModule.input.criteria'>{{action[criterion.name]}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                    <!-- Sort Module -->
                    <div ng-if = 'currentModule.parent_type == "Sort"' ng-cloak>
                      <div class = 'row text-center'>
                        <ul class = 'draglist'>
                          <li class = 'drop-obj' ng-repeat = 'obj in currentModule.input.objects'>
                            <div class = 'drag-obj' ng-class = 'obj.name'>{{obj.name}}</div>
                            <div ng-if = 'currentModule.input.objects.length > 1'>
                              <p ng-if = '$index == 0' style = 'margin-top: 20%'>Most Important</p>
                              <p ng-if = '$index == currentModule.input.objects.length - 1' style = 'margin-top: 20%'>Least Important</p>
                            </div>
                          </li>
                        </ul>
                      </div>

                      <br><br>
                    </div>

                    <!-- CAT-SD Module -->
                    <div ng-if = 'currentModule.parent_type == "CAT-SD"' ng-cloak>
                      <div ng-if = 'currentModule.output == false'>
                        The Non-Negativity Condition was not satisfied.
                      </div>
                      
                      <div ng-if = 'currentModule.output != false'>
                        <!-- Categories assigned to each action -->
                        <p class = 'header-2'>Assigned Categories</p>
                        
                        <table class = 'table table-bordered table-hover'>
                          <thead>
                            <tr>
                              <th class = 'text-center'>Action</th>
                              <th class = 'text-center' ng-repeat = 'category in currentModule.input.categories'>{{category.name}}</th>
                              <th class = 'text-center'>Not Assigned</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat = 'result in currentModule.output[0]'>
                              <td>{{result.action}}</td>
                              <td ng-repeat = 'category in currentModule.input.categories'>
                                <span class = 'glyphicon glyphicon-ok' style = 'color: green' ng-if = 'result[category.name] == true'></span>
                              </td>
                              <td>
                                <span class = 'glyphicon glyphicon-ok' style = 'color: green' ng-if = 'result["Not Assigned"] == true'></span>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        
                        <!-- Delta Values -->
                        <p class = 'header-2'>Similarity Values Per Reference Action</p>
                        
                        <table class = 'table table-bordered table-hover'>
                          <thead>
                            <tr>
                              <th class = 'text-center'>Action</th>
                              <th class = 'text-center' ng-repeat = 'ref_action in currentModule.input["reference actions"]'>{{ref_action.name}}</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat = 'result in currentModule.output[2]'>
                              <td>{{result.action}}</td>
                              <td ng-repeat = 'ref_action in currentModule.input["reference actions"]'>
                                {{result[ref_action.name]}}
                              </td>
                            </tr>
                          </tbody>
                        </table>

                        <!-- Delta Max Values -->
                        <p class = 'header-2'>Maximum Similarity Values Per Category</p>
                        
                        <table class = 'table table-bordered table-hover'>
                          <thead>
                            <tr>
                              <th class = 'text-center'>Action</th>
                              <th class = 'text-center' ng-repeat = 'category in currentModule.input.categories'>{{category.name}}</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat = 'result in currentModule.output[1]'>
                              <td>{{result.action}}</td>
                              <td ng-repeat = 'category in currentModule.input.categories'>
                                {{result[category.name]}}
                              </td>
                            </tr>
                          </tbody>
                        </table>

                      </div>
                    </div>

                    <!-- Inquiry Module -->
                    <div ng-if = 'currentModule.parent_type == "Inquiry"' ng-cloak>

                      <p class = 'header-1'>Log</p>

                      <br>

                      <!-- Current Round -->
                      <p class = 'header-1'>Round {{currentModule.input.current_round}}</p>

                      <br>

                      <!-- Survey Link -->
                      <p class = 'header-1'>Survey Link</p>

                      {{currentModule.log.link}}

                      <br><br>

                      <!-- Status -->
                      <p class = 'header-1'>Status</p>

                      <div class = 'row' ng-if = 'currentModule.log.status == "running"' ng-cloak>
                        <div class = 'col-md-5'></div>
                        <div class = 'col-md-2'>
                          Running
                          <button type = 'button' class = 'btn btn-danger' ng-click = 'stopInquiry()' title = 'Stop Inquiry' style = 'float: right'>
                            <span class = 'glyphicon glyphicon-stop'></span>
                          </button>
                        </div>
                        <div class = 'col-md-5'></div>
                      </div>

                      <div class = 'row' ng-if = 'currentModule.log.status == "ended"' ng-cloak>Ended</div>

                      <br>
                      
                      <!-- Specialists waiting for approval -->
                      <p class = 'header-1'>Specialists waiting for approval</p>

                      <table class = 'table table-bordered table-hover'>
                        <thead>
                          <tr>
                            <th class = 'text-center'>Email Address</th>
                            <th class = 'text-center'>Request Date</th>
                            <th class = 'col-md-2'></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat = 'user in currentModule.log.pending_users'>
                            <td>{{user.email}}</td>
                            <td>{{user.request_date}}</td>
                            <td>
                              <button type = 'button' class = 'btn btn-success' title = 'Approve Request' ng-click = 'approveRequest(user)'>Approve</button>
                              <button type = 'button' class = 'btn btn-danger' title = 'Reject Request' ng-click = 'rejectRequest(user)'>Reject</button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      
                      <br>
                      
                      <!-- Specialists that answered -->
                      <p class = 'header-1'>Specialists that answered</p>

                      <table class = 'table table-bordered table-hover'>
                        <thead>
                          <tr>
                            <th class = 'text-center'>Email Address</th>
                            <th class = 'text-center'>Answer Submission Date</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat = 'user in currentModule.log.emails'>
                            <td>{{user.email}}</td>
                            <td>{{user.answer_submission_date}}</td>
                          </tr>
                        </tbody>
                      </table>

                      <strong>Number Of Answers:</strong> {{currentModule.log.emails.length}}

                      <br><br>

                      <!-- Open Answer Questions -->
                      <p class = 'header-1'>Open Answer Questions</p>

                      <div ng-repeat = 'quest in currentModule.log.open_answer_questions'>
                        <table class = 'table table-bordered table-hover'>
                          <thead>
                            <tr>
                              <th class = 'text-center' colspan = '2'>{{quest.question}}</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat = 'user in currentModule.log.emails'>
                              <td class = 'col-md-6'>{{user.email}}</td>
                              <td class = 'col-md-6'>{{quest[user.email]}}</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>

                      <div ng-if = 'currentModule.input.suggestions.toggle' ng-cloak>
                        <br>
                        <!-- Suggestions -->
                        <p class = 'header-1'>Suggestions</p>

                        <table class = 'table table-bordered table-hover'>
                          <thead>
                            <tr>
                              <th class = 'text-center col-md-6'>{{currentModule.input.suggestions.title}}</th>
                              <th class = 'text-center col-md-6'>Description</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr ng-repeat = 'suggestion in currentModule.log.suggestions'>
                              <td>{{suggestion.title}}</td>
                              <td>{{suggestion.description}}</td>
                            </tr>
                          </tbody>
                        </table>

                        <strong>Number Of Suggestions:</strong> {{currentModule.log.suggestions.length}}
                      </div>

                      <!-- Horizontal Divider -->
                      <br><hr class = 'custom-hr'>

                      <p class = 'header-1'>Output</p>

                      <!-- Questions -->
                      <p class = 'header-1'>Questions</p>

                      <table class = 'table table-bordered table-hover'>
                        <thead>
                          <tr>
                            <th class = 'text-center col-md-4'>
                              Title
                              <a href><span class = 'glyphicon glyphicon-triangle-bottom' style = 'float: right' ng-click = 'sortData("title", "descendant", currentModule.output)'></span></a>
                              <a href><span class = 'glyphicon glyphicon-triangle-top' style = 'float: right' ng-click = 'sortData("title", "ascendant", currentModule.output)'></span></a>
                            </th>
                            <th class = 'text-center'>
                              Total Score
                              <a href><span class = 'glyphicon glyphicon-triangle-bottom' style = 'float: right' ng-click = 'sortData("total_score", "descendant", currentModule.output)'></span></a>
                              <a href><span class = 'glyphicon glyphicon-triangle-top' style = 'float: right' ng-click = 'sortData("total_score", "ascendant", currentModule.output)'></span></a>
                            </th>
                            <th class = 'text-center'>
                              Average Score
                              <a href><span class = 'glyphicon glyphicon-triangle-bottom' style = 'float: right' ng-click = 'sortData("average", "descendant", currentModule.output)'></span></a>
                              <a href><span class = 'glyphicon glyphicon-triangle-top' style = 'float: right' ng-click = 'sortData("average", "ascendant", currentModule.output)'></span></a>
                            </th>
                            <th class = 'text-center'>
                              Standard Deviation
                              <a href><span class = 'glyphicon glyphicon-triangle-bottom' style = 'float: right' ng-click = 'sortData("standard_deviation", "descendant", currentModule.output)'></span></a>
                              <a href><span class = 'glyphicon glyphicon-triangle-top' style = 'float: right' ng-click = 'sortData("standard_deviation", "ascendant", currentModule.output)'></span></a>
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat = 'question in currentModule.output'>
                            <td>{{question.title}}</td>
                            <td>{{question.total_score}}</td>
                            <td>{{question.average}}</td>
                            <td>{{question.standard_deviation}}</td>
                          </tr>
                        </tbody>
                      </table>

                      <strong>Number Of Questions:</strong> {{currentModule.output.length}}
                    </div>

                    <!-- SRF Module -->
                    <div ng-if = 'currentModule.parent_type == "SRF"' ng-cloak>
                      <table class = 'table table-bordered table-condensed table-striped table-hover'>
                        <thead>
                          <tr>
                            <th class = 'text-center'>Criterion</th>
                            <th class = 'text-center' ng-if = 'currentModule.input["weight type"] == "Non-Normalized" || currentModule.input["weight type"] == "Both"'>Non-Normalized Weight</th>
                            <th class = 'text-center' ng-if = 'currentModule.input["weight type"] == "Normalized" || currentModule.input["weight type"] == "Both"'>Normalized Weight</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat = 'result in currentModule.output'>
                            <td>{{result.name}}</td>
                            <td ng-if = 'currentModule.input["weight type"] == "Non-Normalized" || currentModule.input["weight type"] == "Both"'>{{result["non-normalized weight"]}}</td>
                            <td ng-if = 'currentModule.input["weight type"] == "Normalized" || currentModule.input["weight type"] == "Both"'>{{result["normalized weight"]}}</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Module Templates -->

          <!-- Input File Template -->
          <template id = 'inputfile-temp'>
            <div id = 'inputfile' class = 'module-template module-inputfile draggable'>
              <a id = 'filename' href class = 'module-circle-anchor' data-toggle = 'modal' data-target = '#inputfile-modal' ng-click = 'selectCurrentModule($event)'></a>

              <a href ng-click = 'selectDeleteModule($event)' style = 'display: block; margin-top: -13%; margin-left: 87%'>
                <span class = 'glyphicon glyphicon-remove'></span>
              </a>

              <button id = 'inputfile-output' type = 'button' class = 'module-circle module-circle-output' ng-click = 'drawConnection($event, "output")' style = 'margin-top: 3%; margin-left: 39%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: 10%'>Output</span>
            </div>
          </template>

          <!-- OrderBy Template -->
          <template id = 'orderby-temp'>
            <div id = 'orderby' class = 'module-template module-orderby draggable'>
              <a id = 'mod-name' href class = 'module-circle-anchor' data-toggle = 'modal' data-target = '#orderby-modal' ng-click = 'selectCurrentModule($event)'></a>

              <a href ng-click = 'selectDeleteModule($event)' style = 'display: block; margin-top: -14.5%; margin-left: 87%'>
                <span class = 'glyphicon glyphicon-remove'></span>
              </a>

              <button id = 'orderby-criteria' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "criteria")' style = 'margin-top: 3%; margin-left: -49%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: -37%'>Criteria</span>

              <button id = 'orderby-actions' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "actions")' style = 'margin-top: 15%; margin-left: -49%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 13.5%; margin-left: -37%'>Actions</span>

              <button id = 'orderby-output' type = 'button' class = 'module-circle module-circle-output' ng-click = 'drawConnection($event, "output")' style = 'margin-top: 3%; margin-left: 38%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: 6.5%'>Output</span>
            </div>
          </template>

          <!-- Sort Template -->
          <template id = 'sort-temp'>
            <div id = 'sort' class = 'module-template module-sort draggable'>
              <a id = 'mod-name' href class = 'module-circle-anchor' data-toggle = 'modal' data-target = '#sort-modal' ng-click = 'selectCurrentModule($event)'></a>

              <a href ng-click = 'selectDeleteModule($event)' style = 'display: block; margin-top: -13.5%; margin-left: 87%'>
                <span class = 'glyphicon glyphicon-remove'></span>
              </a>

              <button id = 'sort-order' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "objects")' style = 'margin-top: 3%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: -36%'>Objects</span>

              <button id = 'sort-output' type = 'button' class = 'module-circle module-circle-output' ng-click = 'drawConnection($event, "output")' style = 'margin-top: 3%; margin-left: 39.5%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: 8%'>Output</span>
            </div>
          </template>

          <!-- CAT-SD Template -->
          <template id = 'cat-sd-temp'>
            <div id = 'cat-sd' class = 'module-template module-cat-sd draggable'>
              <a id = 'mod-name' href class = 'module-circle-anchor' data-toggle = 'modal' data-target = '#cat-sd-modal' ng-click = 'selectCurrentModule($event)'></a>

              <a href ng-click = 'selectDeleteModule($event)' style = 'display: block; margin-top: -11%; margin-left: 91%'>
                <span class = 'glyphicon glyphicon-remove'></span>
              </a>

              <button id = 'cat-sd-criteria' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "criteria")' style = 'margin-top: 3%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: -39.5%'>Criteria</span>

              <button id = 'cat-sd-scales' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "scales")' style = 'margin-top: 12%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 10.5%; margin-left: -39.5%'>Scales</span>

              <button id = 'cat-sd-functions' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "functions")' style = 'margin-top: 21%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 19.5%; margin-left: -39.5%'>Functions</span>

              <button id = 'cat-sd-actions' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "actions")' style = 'margin-top: 30%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 28.5%; margin-left: -39.5%'>Actions</span>

              <button id = 'cat-sd-categories' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "categories")' style = 'margin-top: 39%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 37.5%; margin-left: -40%'>Categories</span>
              
              <button id = 'cat-sd-interaction-effects' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "interaction effects")' style = 'margin-top: 48%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 46.5%; margin-left: -39.5%'>Interaction Effects</span>
              
              <button id = 'cat-sd-reference-actions' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "reference actions")' style = 'margin-top: 57%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 55.5%; margin-left: -40%'>Reference Actions</span>

              <button id = 'cat-sd-output' type = 'button' class = 'module-circle module-circle-output' ng-click = 'drawConnection($event, "output")' style = 'margin-top: 3%; margin-left: 42%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: 18.5%'>Output</span>
            </div>
          </template>

          <!-- Inquiry Template -->
          <template id = 'inquiry-temp'>
            <div id = 'inquiry' class = 'module-template module-inquiry draggable'>
              <a id = 'mod-name' href class = 'module-circle-anchor' data-toggle = 'modal' data-target = '#inquiry-modal' ng-click = 'selectCurrentModule($event)'></a>

              <a href ng-click = 'selectDeleteModule($event)' style = 'display: block; margin-top: -14%; margin-left: 87%'>
                <span class = 'glyphicon glyphicon-remove'></span>
              </a>

              <button id = 'inquiry-subject' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "subject")' style = 'margin-top: 3%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: -36%'>Subject</span>

              <button id = 'inquiry-emails' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "emails")' style = 'margin-top: 15%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 13.5%; margin-left: -36%'>Emails</span>

              <button id = 'inquiry-questions' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "questions")' style = 'margin-top: 27%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 25.5%; margin-left: -36%'>Q-Sort Questions</span>

              <button id = 'inquiry-output' type = 'button' class = 'module-circle module-circle-output' ng-click = 'drawConnection($event, "output")' style = 'margin-top: 3%; margin-left: 38.5%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: 7%'>Output</span>
            </div>
          </template>

          <!-- SRF Template -->
          <template id = 'srf-temp'>
            <div id = 'srf' class = 'module-template module-srf draggable'>
              <a id = 'mod-name' href class = 'module-circle-anchor' data-toggle = 'modal' data-target = '#srf-modal' ng-click = 'selectCurrentModule($event)'></a>

              <a href ng-click = 'selectDeleteModule($event)' style = 'display: block; margin-top: -12%; margin-left: 89%'>
                <span class = 'glyphicon glyphicon-remove'></span>
              </a>

              <button id = 'srf-criteria' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "criteria")' style = 'margin-top: 3%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: -39%'>Criteria</span>

              <button id = 'srf-white-cards' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "white cards")' style = 'margin-top: 13%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 11.5%; margin-left: -39%'>White Cards</span>

              <button id = 'srf-ranking' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "ranking")' style = 'margin-top: 23%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 21.5%; margin-left: -39%'>Ranking</span>

              <button id = 'srf-ratio-z' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "ratio z")' style = 'margin-top: 33%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 31.5%; margin-left: -39%'>Ratio Z</span>

              <button id = 'srf-decimal-places' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "decimal places")' style = 'margin-top: 43%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 41.5%; margin-left: -39%'>Decimal Places</span>

              <button id = 'srf-weight-type' type = 'button' class = 'module-circle module-circle-input' ng-click = 'drawConnection($event, "weight type")' style = 'margin-top: 53%; margin-left: -48%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 51.5%; margin-left: -39%'>Weight Type</span>

              <button id = 'srf-output' type = 'button' class = 'module-circle module-circle-output' ng-click = 'drawConnection($event, "output")' style = 'margin-top: 3%; margin-left: 41%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1.5%; margin-left: 15.5%'>Output</span>
            </div>
          </template>

          <!-- Output Template -->
          <template id = 'outputfile-temp'>
            <div id = 'outputfile' class = 'module-template module-outputfile draggable'>
              <a id = 'filename' href class = 'module-circle-anchor' data-toggle = 'modal' data-target = '#outputfile-modal' ng-click = 'selectCurrentModule($event)'></a>

              <a href ng-click = 'selectDeleteModule($event)' style = 'display: block; margin-top: -11.5%; margin-left: 88%'>
                <span class = 'glyphicon glyphicon-remove'></span>
              </a>

              <button id = 'outputfile-input' type = 'button' class = 'module-circle module-circle-output' ng-click = 'drawConnection($event, "output")' style = 'margin-top: 2.5%; margin-left: 39%'></button>
              <span class = 'module-circle-span' style = 'margin-top: 1%; margin-left: 13%'>Output</span>
            </div>
          </template>
        </svg>

        <!-- Delete Module Modal -->
        <div class = 'modal fade' id = 'delete-module-modal' role = 'dialog'>
          <div class = 'modal-dialog'>
            <div class = 'modal-content'>
              <div class = 'modal-header'>
                <button type = 'button' class = 'close' data-dismiss = 'modal'>&times;</button>
                <h4 class = 'modal-title'>Are you sure you want to delete the module {{module_delete_name}} and its connections?</h4>
              </div>
              <div class = 'modal-body'>
                <div class = 'row'>
                  <div class = 'col-md-2'></div>

                  <div class = 'col-md-4'>
                    <button type = 'button' class = 'btn btn-success' ng-click = 'deleteModule()' data-dismiss = 'modal' title = 'Confirm Module Deletion'>
                      Yes
                    </button>
                  </div>

                  <div class = 'col-md-4'>
                    <button type = 'button' class = 'btn btn-danger' data-dismiss = 'modal' title = 'Cancel Module Deletion'>
                      No
                    </button>
                  </div>

                  <div class = 'col-md-2'></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </body>
</html>
